<!---header-area-->
<div class="page-header">
  <h2>All Stock</h2>
  <div class="header-action">
    <button type="button" (click)="exportPopUpShow()">Export</button>
    <button type="button" (click)="exportPopUpShow()">Import</button>
  </div>
</div>

<!---Table-area-->
<div class="table-samary" style="margin-bottom: 30px">
  <nz-card>
    <nz-tabset>
      <nz-tab *ngFor="let tab of tabs" [nzTitle]="tab">
        <div class="table-filter-area">
          <input nz-input placeholder="Search here" nzSize="large" />
          <ul>
            <li>
              <button>Payment Status <i class="fa fa-caret-down"></i></button>
            </li>
          </ul>
        </div>

        <nz-table [nzData]="products" #basicTable nzSize="small">
          <thead>
            <tr>
              <th style="width: 50px; text-align: center">
                <mat-checkbox #matCheckbox class="mat-check" (change)="onAllSelectChange($event)">
                </mat-checkbox>
              </th>
              <th style="width: 50px; text-align: center">Image</th>
              <th>Product Details</th>
              <th>SKU</th>
              <th>Instock</th>
              <th>Committed</th>
              <th>Available</th>
              <th>Unit Cost</th>
              <th>Pre-Order</th>
            </tr>
          </thead>
          <tbody *ngFor="let data of basicTable.data">
            <tr *ngIf="!data.hasVariant">
              <td style="width: 50px; text-align: center">
                <mat-checkbox class="mat-check" (ngModelChange)="onCheckChange($event, i, data?._id)"
                  [(ngModel)]="data.select"></mat-checkbox>
              </td>
              <td>
                <img style="width: 50px" [src]="
                    setThumbnailImage(data)
                      ? setThumbnailImage(data)
                      : '/assets/images/placeholder/test.png'
                  " alt="data.name" />
              </td>
              <td class="produc-details">
                <h2>
                  {{ data.name }}
                  <a><i class="eyeButton" class="fa fa-eye"></i></a>
                </h2>
              </td>
              <td>
                <span>{{ data.sku }}</span>
              </td>
              <td style="color: blue">
                {{ data.quantity + data.committedQuantity }}
              </td>
              <td style="color: orange">{{ data.committedQuantity }}</td>
              <td style="color: green">{{ data.quantity }}</td>
              <td>{{ data.costPrice }}</td>
              <td>{{ data.continueSelling ? "Yes" : "No" }}</td>
            </tr>

            <tr *ngFor="let variant of data?.variantFormArray; let i = index">
              <td style="width: 50px; text-align: center">
                <mat-checkbox class="mat-check" (ngModelChange)="onCheckChange($event, i, data?._id)"
                  [(ngModel)]="data.select"></mat-checkbox>
              </td>
              <td>
                <img style="width: 50px" [src]="
                    setThumbnailImage(data)
                      ? setThumbnailImage(data)
                      : '/assets/images/placeholder/test.png'
                  " alt="data.name" />
              </td>
              <td class="produc-details">
                <h2>
                  {{ data.name }}
                  <a>
                    <i class="eyeButton" class="fa fa-eye"></i>
                  </a>
                </h2>
                <span *ngFor="let type of data.variants; let x = index">
                  {{ this.getVariantName(i, type, data, x)}}
                </span>
              </td>
              <td>
                <span>{{ variant?.variantSku }}</span>
              </td>
              <td style="color: blue">
                {{
                variant?.variantQuantity + variant?.variantCommittedQuantity
                }}
              </td>
              <td style="color: orange">{{ variant?.variantCommittedQuantity }}</td>
              <td style="color: green">{{ variant?.variantQuantity }}</td>
              <td>0 TAKA</td>
              <td>{{ variant.variantContinueSelling ? "Yes" : "No" }}</td>
            </tr>
          </tbody>
        </nz-table>
      </nz-tab>
    </nz-tabset>
  </nz-card>
</div>