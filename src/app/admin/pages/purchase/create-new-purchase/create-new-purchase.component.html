<!-- <mat-dialog-content>
  <div
    class="main_create_invoice"
    [class]="createInvoice ? 'active-create-invoice-area' : 'in-active'"
  >
    <form [formGroup]="dataForm" (ngSubmit)="onSubmit()" autocomplete="off">
      <div class="inside_create_invoice">
        <div class="header-area">
          <div class="header-top">
            <div class="header-top-left">
              <h3>New Purchase Order</h3>
            </div>
            <div class="header-top-right">
              <div class="create-invoice-icon">
                <button mat-dialog-close type="button">
                  <i class="fa-solid fa-xmark"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="header-main">
            <div class="user-search">
              <div class="ship-title">
                <h3 class="items">Reference #</h3>
                <h3 class="items">Supplier Name</h3>
              </div>
              <div class="ship-title">
                <mat-form-field
                  class="items"
                  appearance="outline"
                  class="form-field"
                >
                  <input
                    matInput
                    formControlName="reference"
                    type="text"
                    placeholder="PK-131 india"
                  />
                </mat-form-field>
                <mat-form-field
                  class="items"
                  appearance="outline"
                  class="form-field"
                >
                  <mat-select
                    appearance="outline"
                    class="form-field"
                    [disableOptionCentering]="true"
                    #selectSupplier
                    placeholder="Select Supplier"
                    formControlName="supplier"
                  >
                    <mat-select-filter
                      [placeholder]="'Filter Supplier List'"
                      *ngIf="selectSupplier.focused"
                      [array]="suppliers"
                      [displayMember]="'name'"
                      (filteredReturn)="filteredSupplierList = $event"
                    >
                    </mat-select-filter>
                    <mat-option
                      *ngFor="let item of filteredSupplierList"
                      [value]="item._id"
                    >
                      {{ item.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="supplier-search">
              <div class="block">
                <span>Supplier Link</span>
                <mat-form-field appearance="outline" class="form-field">
                  <input matInput formControlName="supplier_link" type="text" />
                </mat-form-field>
              </div>
              <div class="block">
                <span>Manufacturer</span>
                <mat-form-field appearance="outline" class="form-field">
                  <input matInput formControlName="manufacturer" type="text" />
                </mat-form-field>
              </div>
              <div class="block">
                <span>Shipment Reference</span>
                <mat-form-field appearance="outline" class="form-field">
                  <input
                    matInput
                    formControlName="supplier_reference"
                    type="text"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>

        <div class="edit_order_search">
          <div class="serarch_left">
            <div class="search_inside_div" (click)="onClickSearchArea($event)">
              <mat-icon>search</mat-icon>
              <div>
                <form class="form-field" #searchForm="ngForm">
                  <input
                    #searchInput
                    id="searchInput"
                    class="form-inp"
                    type="text"
                    placeholder="Search in caremebd..."
                    (focus)="handleFocus($event)"
                    name="searchTerm"
                    autocomplete="off"
                    ngModel
                    required
                  />
                  <div *ngIf="isLoading" class="sk-fading-circle">
                    <div class="sk-circle1 sk-circle"></div>
                    <div class="sk-circle2 sk-circle"></div>
                    <div class="sk-circle3 sk-circle"></div>
                    <div class="sk-circle4 sk-circle"></div>
                    <div class="sk-circle5 sk-circle"></div>
                    <div class="sk-circle6 sk-circle"></div>
                    <div class="sk-circle7 sk-circle"></div>
                  </div>
                </form>
              </div>
            </div>
            <ul
              style="width: 400px"
              id="auto-suggestion"
              class="auto-complete-box"
              [ngClass]="searchProducts.length > 0 && isOpen ? 'active' : ''"
            >
              <div
                *ngFor="let data of searchProducts; let i = index"
                style="display: flex"
              >
                <li
                  *ngIf="!data.hasVariant"
                  class="list-view"
                  (click)="onSelectItem(data)"
                >
                  <img
                    class="img-thumb"
                    [src]="
                      data.images && data.images.length > 0
                        ? data.images[0]
                        : '/assets/images/placeholder/test.png'
                    "
                    [alt]="data?.productName"
                  />
                  <div class="desc">
                    <h3>{{ data?.name }}</h3>
                  </div>
                  <div class="price">
                    <h5>à§³{{ data.sellingPrice }}</h5>
                    <p class="discount">

                    </p>
                  </div>
                </li>
                <div *ngIf="data.hasVariant">
                  <li
                    *ngFor="let item of data.variantFormArray; let i = index"
                    class="list-view"
                    (click)="onSelectItem(data, i)"
                  >
                    <img
                      class="img-thumb"
                      [src]="
                        data.images && data.images.length > 0
                          ? data.images[0]
                          : '/assets/images/placeholder/test.png'
                      "
                      [alt]="data?.productName"
                    />
                    <div class="desc">
                      <h3>{{ data?.name }}</h3>
                    </div>
                    <div class="price">
                      <h5>{{ item.variantSku }}</h5>
                      <p class="discount">
                      </p>
                    </div>
                  </li>
                </div>
              </div>
            </ul>
          </div>
        </div>

        <div class="order-table">
          <nz-table>
            <thead>
              <tr>
                <th class="item">Item Details</th>
                <th class="price">Unit Cost Price</th>
                <th class="quantity">PO Quantity</th>
                <th class="discount">Tax(%)</th>
                <th class="amount">Amount</th>
                <th class="order-status">Remove</th>
              </tr>
            </thead>

            <tbody formArrayName="products">
              <div *ngFor="let data of products.controls; let a = index">
                <tr [formGroupName]="a">
                  <td class="item">
                    <div class="product">
                      <div class="product-img">
                        <img
                          [src]="'/assets/images/placeholder/test.png'"
                          alt="data.product.name"
                        />
                      </div>
                      <div class="product-info">
                        <h3>{{ data.value.productData.name }}</h3>
                        <p>SKU: {{ data.value.sku }}</p>
                      </div>
                    </div>
                  </td>
                  <td class="quantity">
                    <mat-form-field appearance="outline" class="form-field">
                      <input
                        matInput
                        type="number"
                        (change)="calculateAmount(a)"
                        formControlName="purchasePrice"
                      />
                    </mat-form-field>
                  </td>
                  <td class="price">
                    <mat-form-field appearance="outline" class="form-field">
                      <input
                        matInput
                        type="number"
                        (change)="calculateAmount(a)"
                        formControlName="purchaseQuantity"
                      />
                    </mat-form-field>
                  </td>
                  <td class="tax">
                    <mat-form-field appearance="outline" class="form-field">
                      <input
                        matInput
                        type="number"
                        (change)="calculateAmount(a)"
                        formControlName="purchaseTax"
                        placeholder="percent(%)"
                      />
                    </mat-form-field>
                  </td>
                  <td class="amount">
                    <span>{{ data?.value?.amount }} Tk</span>
                  </td>
                  <td class="order-delete">
                    <mat-icon (click)="delete(i)"
                      ><i class="fa-solid fa-circle-minus"></i
                    ></mat-icon>
                  </td>
                </tr>
              </div>
            </tbody>
          </nz-table>
        </div>
        <button type="button" mat-button class="addProductButton">
          + Add Product
        </button>
        <div class="custom_notes_field">
          <div class="total-area">
            <ul>
              <li>
                <div class="total-title">
                  <h3>Sub Total</h3>
                </div>
                <div class="total-price">
                  <h4>{{ calculateSubTotal() }} TK</h4>
                </div>
              </li>
              <li>
                <div class="total-title">
                  <h3>Shipping</h3>
                </div>
                <div class="total-price">
                  <mat-form-field appearance="outline" class="form-field">
                    <input
                      matInput
                      type="number"
                      formControlName="purchaseShippingCharge"
                      digitOnly
                    />
                  </mat-form-field>
                </div>
              </li>
              <li>
                <div class="total-title">
                  <h3>Adjustment</h3>
                </div>
                <div class="total-price">
                  <mat-form-field appearance="outline" class="form-field">
                    <input
                      matInput
                      type="number"
                      formControlName="adjustmentPrice"
                    />
                  </mat-form-field>
                </div>
              </li>
              <li>
                <div class="total-title">
                  <h3>Total Amount =</h3>
                </div>
                <div class="total-price">
                  <h4>{{ calculateTotal() }} TK</h4>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div class="invoice_buttons">
          <button mat-stroked-button type="submit">Done</button>
        </div>
      </div>
    </form>
  </div>
</mat-dialog-content> -->

<nz-modal
  [(nzVisible)]="ponewVisible"
  nzTitle="New Purchase Order"
  (nzOnCancel)="purchaseCancel()"
  (nzOnOk)="onSubmit()"
  nzOkText="Save"
  nzWidth="800px"
>
  <ng-container *nzModalContent>
    <form [formGroup]="dataForm" (ngSubmit)="onSubmit()" autocomplete="off">
      <div nz-row [nzGutter]="16" class="mb40">
        <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 12 }">
          <table class="purchase_info">
            <tbody>
              <tr>
                <td>Reference #</td>
                <td style="width: 15px; text-align: center">:</td>
                <td>
                  <input nz-input formControlName="reference" placeholder="PK-131 INDIA" />
                </td>
              </tr>
              <tr>
                <td>Manufacturer</td>
                <td style="width: 15px; text-align: center">:</td>
                <td>
                  <input nz-input formControlName="manufacturer" placeholder="Bangladesh, China, India" />
                </td>
              </tr>
              <tr>
                <td>Shipping Charge</td>
                <td style="width: 15px; text-align: center">:</td>
                <td>
                  <input nz-input type="number" digitOnly formControlName="purchaseShippingCharge" placeholder="0.00" />
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 12 }">
          <table class="purchase_info">
            <tbody>
              <tr>
                <td>Supplier</td>
                <td style="width: 15px; text-align: center">:</td>
                <td>
                  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select Supplier" formControlName="supplier" [nzCustomTemplate]="defaultTemplate">
                    <nz-option [nzLabel]="data.name" [nzValue]="data._id" *ngFor="let data of suppliers"></nz-option>
                  </nz-select>
                </td>
              </tr>
              <tr>
                <td>Supplier Link</td>
                <td style="width: 15px; text-align: center">:</td>
                <td>
                  <input nz-input type="link" formControlName="supplier_link" placeholder="https://" />
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div nz-row [nzGutter]="16">
        <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 24 }">
          <nz-table
            #purchaseTable
            [nzShowPagination]="false"
            [nzData]="[1]"
            nzSize="small"
            class="purchase_product"
            [nzScroll]="{ x: '750px' }"
          >
            <thead>
              <tr>
                <th style="width: 70px">Image</th>
                <th>Details</th>
                <th style="width: 80px">Unit Cost</th>
                <th style="width: 80px">Price</th>
                <th style="width: 80px">Qty</th>
                <th style="width: 80px">Tax (%)</th>
                <th style="width: 80px">Amount</th>
                <th style="width: 50px"></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of purchaseTable.data">
                <td style="width: 70px">
                  <img
                    nz-image
                    width="50px"
                    nzSrc="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                    alt=""
                  />
                </td>
                <td>
                  <h4>Item Details Item Details Item</h4>
                  <h5>IUIUHI</h5>
                </td>
                <td>
                  <input nz-input placeholder="0" />
                </td>
                <td>
                  <input nz-input placeholder="0" />
                </td>
                <td>
                  <input nz-input placeholder="0" />
                </td>
                <td>
                  <input nz-input placeholder="0" />
                </td>
                <td>
                  <p>6565 TK</p>
                </td>
                <td style="text-align: center">
                  <span><i class="las la-lg la-trash"></i></span>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </div>
      <div nz-row [nzGutter]="16">
        <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 12 }">
          <div class="add_product">
            <form #searchForm="ngForm">
              <input
                #searchInput
                (focus)="handleFocus($event)"
                name="searchTerm"
                autocomplete="off"
                ngModel
                nz-input
                placeholder="Add new product"
                nz-dropdown
                nzTrigger="click"
                [nzDropdownMenu]="menu"
              />
            </form>
            <nz-dropdown-menu #menu="nzDropdownMenu">
              <ul nz-menu nzSelectable class="search_items">
                <li nz-menu-item *ngFor="let data of searchProducts">
                  <div class="left">
                    <img
                      nz-image
                      width="50px"
                      height="50px"
                      nzSrc="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                      alt=""
                    />
                    <div class="left_details">
                      <h4>{{data?.name}}</h4>
                      <p>{{data?.sku}}</p>
                    </div>
                  </div>
                  <div class="right">{{data?.sellingPrice}} TK</div>
                </li>
              </ul>
            </nz-dropdown-menu>
          </div>
        </div>
        <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 12 }">
          <div class="order_summery">
            <nz-card nzSize="small">
              <nz-list>
                <nz-list-item>
                  <h4>Sub Total</h4>
                  <h4>6565Tk</h4>
                </nz-list-item>
                <nz-list-item>
                  <p>Tax (0%)</p>
                  <p>565Tk</p>
                </nz-list-item>
                <nz-divider nzSize="small"></nz-divider>
                <nz-list-item>
                  <h2>Total = 6565 TK</h2>
                </nz-list-item>
              </nz-list>
            </nz-card>
          </div>
        </div>
      </div>
    </form>
  </ng-container>
</nz-modal>
